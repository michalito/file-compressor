{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/login.css') }}">
{% endblock %}

{% block content %}
<div class="login">
    <div class="login__card">
        <div class="login__header">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="" class="login__logo">
            <h1 class="login__title">Compressify</h1>
            <p class="login__tagline">Fast, private image compression in your browser</p>
            <p class="login__subtitle">Enter your password to continue</p>
        </div>
        <div class="login__body">
            {% if error %}
            <div class="login__error{% if 'Too many' in error %} login__error--rate-limit{% endif %}" role="alert">
                {% if 'Too many' in error %}
                <svg class="icon" width="16" height="16" aria-hidden="true"><use href="#icon-alert-triangle"/></svg>
                {% else %}
                <svg class="icon" width="16" height="16" aria-hidden="true"><use href="#icon-alert-circle"/></svg>
                {% endif %}
                <span>{{ error }}</span>
            </div>
            {% endif %}
            <form method="POST" action="{{ url_for('main.login') }}" class="login__form" id="login-form" novalidate>
                {% if form %}
                    {{ form.csrf_token }}
                {% else %}
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                {% endif %}

                <div class="form-field">
                    <label for="password" class="form-label">Password</label>
                    <div class="form-password">
                        {% if form %}
                            {{ form.password(class="form-input", id="password", placeholder="Enter your password", required=true, autocomplete="current-password") }}
                        {% else %}
                            <input type="password" id="password" name="password" class="form-input" placeholder="Enter your password" required autocomplete="current-password">
                        {% endif %}
                        <button type="button" id="password-toggle" class="form-password__toggle" aria-label="Show password">
                            <svg class="icon icon--eye" width="18" height="18"><use href="#icon-eye"/></svg>
                            <svg class="icon icon--eye-off" width="18" height="18" style="display:none"><use href="#icon-eye-off"/></svg>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn--primary btn--lg btn--full">
                    Log in
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
